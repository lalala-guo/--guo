# 平台商品属性

## 接口请求函数

## 三级分类列表
  - 使用element-ui的 card form表单的行内表单 实现静态页面
  - 定义cForm表单中的category1Id, category2Id, category3Id  以及category1List, category2List, category3List
  - 通过已经定义好的接口请求函数getCategorys1获取一级分类数据列表, 并将获得的数据保存在category1List中,并遍历显示数据, 当然显示二级列表时,传入一级分类列表的id,即category1Id,一次类推,三级分类列表都选择完毕,分发事件,获取数据列表

## 数据列表显示
  - 数据列表共分为两部分  数据显示和添加属性界面(更新修改页面)
  - 数据显示 使用element-ui的 card button按钮和table表格  实现静态页面
  - 添加属性(更新/修改属性) 使用 element-ui的 card,form行内表单,button按钮,table表格 实现静态页面
  - 绑定点击事件, 通过 isShowList 的true或false 切换数据列表或添加属性界面的显示
  - 定义category1Id, category2Id, category3Id , 以及 attrs: [], attrs用来存放获取的数据列表,并将其传给表格,遍历动态显示出来, 其中序号 要使用type='index'显示,属性名称通过prop='attrName', 属性值列表要遍历显示
  - 其中操作中的修改和删除按钮, 显示提示, 要通过封装的HintButton按钮来实现, 因为el-button中没有对hover的封装, 要自己对el-button进行二次封装, 使用组件间通信 $attrs 和 v-bind  $listeners 和 v-on
  - 在点击修改是触发的事件为更新事件, 适合添加属性的界面为同一个, 此时要传入列表数据, 并保存在attr中, 此时要使用深拷贝,即利用lodash的cloneDeep函数, 因为attr是一个包含引用类型的对象, 直接拷贝的话只是拷贝地址,指向的还是同一个对象,会导致更改后不能取消,要使用浅拷贝解决,但是由于attr是一个包含引用类型的对象,里面含有attrValueList的数组,浅拷贝只能拷贝到第一层的属性数据,此时拷贝的attrValueList指向的还是原来的数组,更改后依旧会出现时上述问题, 此时就要用到深拷贝,深拷贝会将所有的数据全部拷贝下来,成为一个新的attr对象,更新修改时, 取消就不会更改原来的数据 
  - 在添加属性界面 绑定添加监听, 要显示input输入框, 在输入属性之后按enter键或失去焦点都显示文本,此时也要通过一个属性来控制显示隐藏: edit 是否为编辑模式, 在失去焦点时使用@blur事件, 但是在@keyup.enter时,按enter键不起作用,因为此时是自定义事件,要使用原生的keyup事件, 要加上.native来使用  即@keyup.enter.native
  - 在添加之后点击添加的属性时,要重新显示input输入框, 并传入此时的属性数据, 此时如果有edit就需要将edit改为true, 没有就需要通过$set()添加edit属性, 需要将这个span标签转为行内块,即display:inline-block; 并将其宽度设置为父元素的一样宽,即100%
  - 删除: attr.attrValueList.splice($index, 1)




